using MySql.Data.MySqlClient;

namespace Cadastro
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void btnCadastrar_Click(object sender, EventArgs e)
        {

            try

    {
                string nome = txtNome.Text;
                string dataNasc = txtNascimento.Text;
                string curso = txtCurso.Text;   
                string telefone = txtTelefone.Text; 
                if (nome != "" && dataNasc != "" && curso!= "" && telefone!= "")
                {
                    string conexaoBanco = "Server=localhost; Database=escola; Uid=root; Pwd='';";
                    MySqlConnection conexao = new MySqlConnection(conexaoBanco);

                    conexao.Open();

                    DateTime datamySql = Convert.ToDateTime(dataNasc);
                    string dataNascimentoFormatada = datamySql.ToString("yyyy-MM-dd");

                    string cadastro = "INSERT INTO alunos (nome, dataNascimento, curso, telefone) values (@nome, @dataNascimento, @curso, @telefone)";
                    MySqlCommand comando = new MySqlCommand(cadastro, conexao);
                    comando.Parameters.AddWithValue("@nome", nome);
                    comando.Parameters.AddWithValue("@dataNascimento", dataNascimentoFormatada);
                    comando.Parameters.AddWithValue("@curso", curso);
                    comando.Parameters.AddWithValue("@telefone", telefone);

                    comando.ExecuteNonQuery();
                    MessageBox.Show("Cadastro realizado com sucesso!");

                    txtNome.Clear();
                    txtNascimento.Clear();
                    txtCurso.Clear();
                    txtTelefone.Clear();

                   
                }
                else
                {

                }


            }
	catch (Exception ex)

    {
MessageBox.Show("Erro ao relizae cadastro!" + ex. Message);
                
            }
        }
    }
}
